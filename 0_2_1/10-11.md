# 比特币的扩容与分叉
## 背景

之前比特币的一个区块是1M可以容纳一千多条信息。到比特币浏览器上你可以看到，每个区块大概是1M左右。已经达到了上限。
现在很多人交易请求发出后，没有办法被加入到第一个区块中，可能要等到好几个之后。

### 比特币曾经遭受的粉尘攻击
粉尘攻击指有人制造大量的小额转账，造成网络无法正常运转，很多人的转账要等2两天
现在确实也有扩容需求

而扩容这件事情上，不同团队有不同理念；2015年比特币Core团队在香港达成了香港共识，不过这个共识很快就流产。后来在纽约又达成共识，扩容到2M+隔离见证，当天得到全网83%算力的
支持。

扩容方案有两种
- 不动比特币本身的区块，闪电网络。
- 直接扩大比特币本身的容量
 -BIP 141 是比特币core提出来的隔离见证方案。比特币上的分为交易信息和见证信息。交易信息就是转帐的信息，见证信息指在哪个节点，那个时间验证交易信息可靠的信息。
  中本聪设计的时候把两者放在一块。如果把见证信息拿出来就相当于扩容。BIP141 是指在2015年12月15日的任意一个难度周期，大约两周时间内，如果有超过95%的算力准备就绪
  的话，这个见证将被激活。但这个很难实现。有人提出两个辅助方案
  - UASF 由用户激活软分叉，采用BIP148软件激活隔离见证，2017年8月1号，BIP148软件会拒绝不包含bit1信号的区块。也就是说，如果大多数矿工运行这个软件的话，他们就会
  去拒绝少数不用这个软件的人挖出来的区块。因此，这些矿工会有最长的链，并且需要在最长链上激活BIP141的隔离验证。最终会看到运行BIP141的节点会在链上看到超过95%的区块
95%的区块包含bit1的信号，从而出发隔离见证。
- 这个方案已经实施，诞生新的资产-比特币现金，比特币的区块大小是8M 
- segrateXX 是由一些比特币公司和拥有80%算力的矿工签署的纽约共识。通过BIP91来激活隔离见证。BIP91的做法是当连续两天内有超过80%的算力发出支持BIP91的信号的
话，所有BIP91的节点将会拒绝所有不含有BIP141准备信号的区块。2017年年底和2018年年初，segrateXX将通过硬分叉将区块上限增加至2M，以后可能会有新的分叉

### 硬分叉和软分叉：

- 硬分叉：当比特币协议发生改变的时候，如果发生由旧节点去拒绝新节点创造的区块的情况下，区块将会分成独立的两条链，矿工需要在两条链中选择一条链进行挖矿
- 软分叉：当比特币协议发生改变的时候没，旧的节点并不会意识到规则是不同的，会遵循改变后的规则，并接受又新的节点创造的区块，因此不会产生新的链。相当于产生了
word2003文档的时候，仍然可以用2011的文档去打开之前的文档。就是前兼容

### 分叉风险
对很多人来说，如果分叉，最大风险就是重放攻击。重放攻击可以追溯到2016年7月以太坊英分叉受到的攻击，受损失不少。举个例子，比如如果比特币分裂成多种比特币
A B C,用户账户内同时存在三种，每一条链上的地址产生的私钥算法相同，交易格式也完全相同，导致一条链上的交易在另外一条链上很可能也是完全合法的。所以一个用户
在一条链上发生的交易到另外一条链上重新广播，也可能会得到确认，叫重放攻击。简单来书，如果你在转A到别人账户的时候，B和C也可能被同时转走。
### 对应方法
- 在尘埃落定之前，不要转账 分叉落定之后，将比特币分别转到自己不同的钱包和地址里，知道两个资产彻底分离
- 找靠谱的平台，会帮你处理好
- 如果把比特币放在仅支持分叉后钱包里，可能会找不回来部分新的资产。


### 问题

现在比特币钱包有多大，区块从1M扩容到8M之后，你下载的全节点钱包会有多大？
8*6*24*365/1024=410G


